#srun --nodes=1 --tasks-per-node=128 --cpus-per-task=2 --cpu-bind=cores python ./run_bfd.py --config ./config/config_measure_target_moments_only.yaml --tiles DES0009-6248 --output_label _run1

#srun --nodes=1 --tasks-per-node=128 --cpus-per-task=2 --cpu-bind=cores python ./run_bfd.py --config ./config/config_measure_target_moments_only.yaml --tiles DES0002-4206 --output_label _run1

#srun --nodes=1 --tasks-per-node=128 --cpus-per-task=2 --cpu-bind=cores python ./run_bfd.py --config ./config/config_measure_target_moments_only.yaml  --output_label _run1


#srun --nodes=4 --tasks-per-node=2  python ./run_bfd.py --config ./config/config_measure_target_moments_only.yaml --output_label _run1
run:
     - measure_moments_targets

######################################################################
#                       general config
######################################################################

general:
    output_folder:  '/pscratch/sd/m/mgatti/BFD/_test_bfd_y6kp/'
    
    # BFD window function parameters. Defaults: n = 4, sigma = 0.65
    filter_sigma: 0.65  
    
    # per-band weights.
    bands_meds_files: ['g','r','i','z']
    bands_weights: [0.,0.7,0.2,0.1]

    # pad factor for the FFT of the images. Default: 2. 
    FFT_pad_factor: 2.
    
    # whether if you want to use MPI or not.
    MPI: True

        
######################################################################
#                       measure_moments_targets
######################################################################

measure_moments_targets:

    path_MEDS: '/pscratch/sd/m/mgatti/BFD/data/'
    path_galaxy_models: '/pscratch/sd/m/mgatti/BFD/models/'
    #tiles: ['DES0009-6248']
    tiles: ['DES0000-0333','DES0000-3623','DES0006-4123','DES0013-5457','DES0013-3957','DES0010-6456','DES0008-3040','DES0005-5331','DES0007-5957','DES0005-4914','DES0000-3706','DES0003-5457','DES0006-3332','DES0011-3040','DES0005-5622','DES0005+0126','DES0002-4331','DES0001-6205','DES0011-5040','DES0012-6331','DES0011+0209','DES0010-3957','DES0000-0250','DES0001-0624','DES0002-3332','DES0012-3332','DES0006-4040','DES0014+0126','DES0006-0333','DES0010-4123','DES0009-3332','DES0013-2915','DES0006-5705','DES0010-0541','DES0005-0041','DES0007-4457','DES0002-5414','DES0011-3123','DES0004-5831','DES0011+0126','DES0009+0500','DES0002-4414','DES0008+0209','DES0011-3623','DES0003-4540','DES0004-0624','DES0007-5123','DES0007-3749','DES0008+0001','DES0001-5705','DES0008-3457','DES0014+0043','DES0001-0541','DES0002-4249','DES0001-3457','DES0006+0500','DES0012-0458','DES0007-0624','DES0011-0124','DES0003-4623','DES0000-5622','DES0000+0335','DES0009-4914','DES0010-4957','DES0006-4957','DES0000-4748','DES0009-4831','DES0012-0416','DES0013-5205','DES0008-6414','DES0013-3249','DES0000+0252','DES0004-4831','DES0006+0418','DES0007-3706','DES0003+0252','DES0005-3415','DES0008-3415','DES0006-3249','DES0005-0207','DES0005-0707','DES0009-5540','DES0011-0250','DES0013-4831','DES0011-0333','DES0003-6248','DES0008-4748','DES0008-0250','DES0004-3540','DES0004-3457','DES0009-3249','DES0001-5331','DES0005+0043','DES0010-0624','DES0010-3749','DES0002-5040','DES0011-0207','DES0008+0043','DES0002-4123','DES0011-4623','DES0000-0416','DES0001-4957','DES0007-4623','DES0004-5540','DES0006-0416','DES0000+0418','DES0010-5622','DES0010-3706','DES0000-0207','DES0009+0418','DES0004-3623','DES0014+0252','DES0002+0043','DES0005+0001','DES0005+0209','DES0009-5248','DES0013-4123','DES0009-0458','DES0002+0126','DES0006-3832','DES0003-0458','DES0002-3957','DES0006-3957','DES0006-4331','DES0014+0001','DES0010-3914','DES0003-3749','DES0001-0458','DES0012-5705','DES0010-4249','DES0012-0541','DES0011-6122','DES0009+0335','DES0001-6414','DES0003-4457','DES0003+0335','DES0000-3540','DES0010-4040','DES0011+0335','DES0008-5457','DES0013-5957','DES0007-3623','DES0006-4206','DES0004-0541','DES0003-0333','DES0007-4540','DES0010-4331','DES0000-5248','DES0012+0418','DES0003-5205','DES0006+0335','DES0006-3914','DES0000-5914','DES0009-0416','DES0008-0041','DES0002-5957','DES0008+0252','DES0003-6456','DES0012+0500','DES0011-5414','DES0011-5914','DES0012-4748','DES0009-6039','DES0003-3706','DES0006-0458','DES0005-6331','DES0009-5831','DES0003-6039','DES0002+0209','DES0002-3415','DES0011+0043','DES0001-4914','DES0007-3123','DES0009-6248','DES0007-6205','DES0006-4414','DES0003+0500','DES0002-0041','DES0013-3206','DES0013-3914','DES0006-5040','DES0009-0333','DES0005+0252','DES0007-0541','DES0008+0126','DES0011-3457','DES0000-4831','DES0003-0416','DES0006-4249','DES0010-4414','DES0000+0209','DES0003-5748','DES0002-3914','DES0008-5748','DES0002-4206','DES0005-0250','DES0010-3206','DES0008-0207','DES0012-5123','DES0010-3832','DES0012-2958','DES0013-4040','DES0008-0124','DES0012-3415','DES0003-4706','DES0011-3540','DES0005-0124','DES0012-4706','DES0002-0124','DES0013-0624','DES0011-0041','DES0003-5123','DES0006-5414','DES0007-3206','DES0003-3832','DES0008-5205','DES0014+0209','DES0003-3249']
    flagged_exp_list: '/global/homes/m/mgatti/BFD_pipeline/data/PSF_cuts.npy'
    reserved_stars_list: '/global/homes/m/mgatti/BFD_pipeline/data/PSF_cuts.npy'
    debug: False
    max_frac_stamp_masked: 0.05
    chunk_size: 1000
    agents: 80  #80 #50
    
